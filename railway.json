{
  "$schema": "https://railway.app/schema.json",
  "name": "solana-ai-city",
  "description": "Web3 city building game on Solana",
  "repository": "https://github.com/xixih6863-ctrl/solana-ai-city",
  "buildCommand": "npm run build",
  "startCommand": "npm run start",
  "healthcheckPath": "/health",
  "healthcheckTimeout": 30,
  "restartPolicyType": "ON_FAILURE",
  "restartPolicyMaxRetries": 3,
  "dockerfilePath": "Dockerfile",
  "variables": {
    "NODE_ENV": "production",
    "PORT": "8080"
  },
  "services": [
    {
      "name": "frontend",
      "source": "frontend",
      "healthcheckPath": "/",
      "buildCommand": "cd frontend && npm install && npm run build",
      "startCommand": "npx serve dist -l $PORT",
      "restartPolicyType": "ON_FAILURE"
    },
    {
      "name": "backend",
      "source": "backend",
      "healthcheckPath": "/health",
      "buildCommand": "cd backend && npm install && npm run build",
      "startCommand": "cd backend && npm run start",
      "restartPolicyType": "ON_FAILURE",
      "dependencies": {
        "database": "postgresql"
      }
    }
  ],
  "databases": {
    "postgresql": {
      "name": "solana_ai_city",
      "multiplexing": true
    }
  },
  "redis": {
    "name": "solana-ai-city-redis"
  },
  "mounts": {
    "/var/data": {
      "volumeId": "solana-ai-city-data"
    }
  },
  "metrics": {
    "enabled": true,
    "path": "/metrics"
  }
}
